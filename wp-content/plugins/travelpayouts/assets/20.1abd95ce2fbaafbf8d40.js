(window.travelpayoutsWpPlugin=window.travelpayoutsWpPlugin||[]).push([[20],{611:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r="reduxFramework:onChangeFields"},612:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return s}));const r="accordionContainer:opened",s="accordionContainer:closed"},694:function(e,t,n){e.exports={stylesSpinner:"styles-spinner__1l6Th",spinner:"spinner__2rXlN"}},695:function(e,t,n){e.exports={stylesLabel:"styles-label__19ZnW",stylesIframe:"styles-iframe__1HWkG",stylesIframeWrapper:"styles-iframe-wrapper__3sBuP",stylesIframeLoaded:"styles-iframe--loaded__3byYv",stylesLoader:"styles-loader__EKiMU"}},744:function(e,t,n){"use strict";n.r(t),n.d(t,"WidgetPreviewWrapper",(function(){return j}));var r=n(611),s=n(610),a=n(691),l=n(251),c=n.n(l),i=n(0),o=n.n(i),u=n(696),d=n(612),p=n(692),f=n.n(p);var m;!function(e){e.iframe="iframe",e.script="iframe_script"}(m||(m={}));var y=n(3),b=n.n(y),v=n(693),_=n(694),g=()=>o.a.createElement("div",{className:b()(_.stylesSpinner)},o.a.createElement("div",null),o.a.createElement("div",null),o.a.createElement("div",null),o.a.createElement("div",null)),E=n(695);const O=({title:e,iframeOptions:t})=>{const[n,r]=Object(i.useState)(!0);return o.a.createElement("div",null,o.a.createElement("div",{className:b()(E.stylesLabel)},e),o.a.createElement("div",{className:b()(E.stylesIframeWrapper)},n?o.a.createElement("div",{className:b()(E.stylesLoader)},o.a.createElement(g,null)):null,o.a.createElement(v.a,Object.assign({checkOrigin:!1,autoResize:!0,heightCalculationMethod:"bodyScroll",className:b()(E.stylesIframe,n?null:E.stylesIframeLoaded),scrolling:!1,onInit:()=>r(!1)},t))))},j=e=>{const{formSelector:t,fieldPrefix:n,attributes:l,type:p,previewEndpoint:y,previewText:b="Preview"}=e,[v,_]=Object(i.useState)(null),[g,E]=Object(u.a)({threshold:0,triggerOnce:!0});Object(i.useEffect)((()=>{Object(s.b)(d.b,"body",j),Object(s.b)(r.a,"body",(()=>{j()}))}),[]),Object(i.useEffect)((()=>{j()}),[t,n]);const j=()=>_(((e,t)=>{const n=document.querySelector(e);if(n){const e=f()(n,{hash:!0});if(e.option_page){const n=e.option_page.replace("_group","");if(e[n]){const r=e[n];return Object.entries(r).filter((([e])=>e.match(`^(${t})_`))).reduce(((e,[n,r])=>Object.assign(Object.assign({},e),{[n.replace(`${t}_`,"")]:r})),{})}}}return null})(t,n)),h=Object(i.useMemo)((()=>v?{fields:v,parseInt:e=>parseInt(e,10),not:(e,t="")=>{let n=e;return e&&e.length||(n=t),!parseInt(n,10)},toBoolean:e=>!e||"1"!==e&&"true"!==e?"false":"true"}:null),[v]),I=Object(i.useMemo)((()=>{const e={};return l&&Object.entries(l).forEach((t=>{const[n,r]=t;if(r){const t=c()(r,{interpolate:/{{([\s\S]+?)}}/g}),s=h?t(h):r;e[n]="src"===n?(e=>encodeURI(e).replace(/#/g,"%23"))(s):s}})),e.src=[y,a.Base64.encode(e.src),"&type="+(p&&p===m.script?0:1)].join(""),e}),[h,l]);return o.a.createElement("div",{ref:g},E?o.a.createElement(O,{title:b,iframeOptions:I}):o.a.createElement(o.a.Fragment,null,"Â "))}}}]);